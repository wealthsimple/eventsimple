<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <title>Eventable</title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <%= stylesheet_link_tag "https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css",
    media: "all",
    integrity: 'sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65',
    crossorigin: 'anonymous'
  %>
  <%= stylesheet_link_tag "https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css",
    media: "all",
    crossorigin: 'anonymous'
  %>
  <%= javascript_include_tag "https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js",
    integrity: "sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V",
    crossorigin: "anonymous"
  %>
  <%= javascript_include_tag "https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js",
    crossorigin: "anonymous"
  %>
  <%= javascript_include_tag "https://cdn.jsdelivr.net/npm/@hotwired/turbo@7.2.4/dist/turbo.es2017-umd.js",
    crossorigin: "anonymous"
  %>
  <style>
    // Structure
    body {
      min-height: 100vh;
      min-height: -webkit-fill-available;
    }

    html {
      height: -webkit-fill-available;
    }

    #page {
      display: flex;
      flex-wrap: nowrap;
      height: 100vh;
      height: -webkit-fill-available;
      max-height: 100vh;
      overflow-x: auto;
      overflow-y: hidden;
    }

    nav {
      width: 20%;
    }

    main {
      flex-shrink: 0;
      height: 100vh;
      width: 80%;
      overflow-y: auto;
    }

    // Sidebar Nav

    .bi {
      vertical-align: -.125em;
      pointer-events: none;
      fill: currentColor;
    }

    .dropdown-toggle { outline: 0; }

    .nav-flush .nav-link {
      border-radius: 0;
    }

    .btn-toggle {
      display: inline-flex;
      align-items: center;
      padding: .25rem .5rem;
      font-weight: 600;
      color: rgba(0, 0, 0, .65);
      background-color: transparent;
      border: 0;
    }
    .btn-toggle:hover,
    .btn-toggle:focus {
      color: rgba(0, 0, 0, .85);
      background-color: #d2f4ea;
    }

    .btn-toggle::before {
      width: 1.25em;
      line-height: 0;
      content: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='rgba%280,0,0,.5%29' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 14l6-6-6-6'/%3e%3c/svg%3e");
      transition: transform .35s ease;
      transform-origin: .5em 50%;
    }

    .btn-toggle[aria-expanded="true"] {
      color: rgba(0, 0, 0, .85);
    }
    .btn-toggle[aria-expanded="true"]::before {
      transform: rotate(90deg);
    }

    .btn-toggle-nav a {
      display: inline-flex;
      padding: .1875rem .5rem;
      margin-top: .125rem;
      margin-left: 1.25rem;
      text-decoration: none;
    }
    .btn-toggle-nav a:hover,
    .btn-toggle-nav a:focus {
      background-color: #d2f4ea;
    }

    .scrollarea {
      overflow-y: auto;
    }

    .fw-semibold { font-weight: 600; }
    .lh-tight { line-height: 1.25; }

    // Styles

    code {
      color: deeppink;
    }

    code.entity-property {
      color: #333;
    }
  </style>
</head>
<body>
  <div id="page">
    <%= render partial: 'eventable/shared/sidebar' %>

    <!-- Main Container Start -->
    <main class="pt-4 px-2">
      <%= render partial: 'eventable/shared/header' %>

      <!-- Content Start -->
      <article class="container">
        <% if @error_message.present? %>
          <div class="alert alert-warning d-flex" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <div>
              <%= @error_message %>
            </div>
          </div>
        <% else %>
            <%= yield %>
        <% end %>
      </article>
      <!-- Content End -->

    </main>
    <!-- Main Container End -->

    <script>
      $( document ).ready(() => {
        $('.action-entity-query').click((event) => {
          const link = $(event.currentTarget);
          const { param, value } = link.data();
          const query = new URLSearchParams(window.location.search)
          query.set(param, value);
          link.attr("href",window.location.pathname + '?' + query.toString());
        });
      });
    </script>

  </div>
</body>
</html>
